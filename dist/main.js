(()=>{"use strict";const e=()=>{const e=[],t=[];for(let t=0;t<10;t+=1)e[t]=new Array(10).fill({});return{getTile:(t,n)=>e[t][n],placeShip:({row:n,col:o,length:r,isVertical:i})=>{const s=(e=>{const t=new Array(e).fill(!1);return{getLength:()=>e,isSunk:()=>t.every((e=>e)),hit:e=>{t[e]=!0}}})(r);if(t.push(s),i)for(let t=0;t<r;t+=1)e[n+t][o]={ship:s,pos:t};else for(let t=0;t<r;t+=1)e[n][o+t]={ship:s,pos:t}},receiveAttack:(t,n)=>{const o=e[t][n];return o.ship?(o.hit=!0,o.ship.hit(o.pos),!0):(e[t][n]={miss:!0},!1)},isAllSunk:()=>t.every((e=>e.isSunk())),isValidTarget:(t,n)=>{const o=e[t][n];return!(o.miss||o.hit)},getWidth:()=>e[0].length,getHeight:()=>e.length}},t=()=>{const e=[];let t=0;const n=[[0,-1],[-1,0],[0,1],[1,0]],o=e=>Math.floor(e*Math.random()),r=()=>{const e=o(10),t=o(10);return Promise.resolve([e,t])};return{takeTurn:async function(n,o){let r,i,s=!1;for(;!s;)[r,i]=await o(),s=n.isValidTarget(r,i);const l=n.receiveAttack(r,i);return l&&(e.push([r,i]),t=0),Promise.resolve({row:r,col:i,hit:l})},randomTarget:r,aiTarget:()=>{if(4===t&&(e.pop(),t=0),0===e.length)return r();let o,i;[o,i]=e[e.length-1];const s=n[t];return o+=s[0],i+=s[1],t+=1,Promise.resolve([o,i])}}};function n(e){const t=document.createElement("div"),n=document.createElement("table");t.appendChild(n);const o=e.getWidth(),r=e.getHeight();for(let t=0;t<r;t+=1){const r=document.createElement("tr");n.appendChild(r);for(let n=0;n<o;n+=1){const o=document.createElement("td");r.appendChild(o),o.innerText=(i=e.getTile(t,n)).hit||i.miss||i.ship?i.miss?".":i.hit&&i.ship.isSunk()?"X":i.hit?"x":"T":"O"}}var i;return t}const o=function(e,t){console.log("drawing borad");const o=n(t);e.firstChild?e.replaceChild(o,e.firstChild):e.appendChild(o)};function r(){const t=e();return t.placeShip({row:4,col:5,length:2,isVertical:!0}),t}function i(){const e=prompt("Select a row"),t=prompt("Select a col");return Promise.resolve([e,t])}const s=async function(){const e=t(),n=t(),s=r(),l=r(),c=document.getElementById("board1"),a=document.getElementById("board2");for(o(c,s),o(a,l);!s.isAllSunk();){o(c,s);const t=await e.takeTurn(l,i);if(console.log("Human: ",t),l.isAllSunk())break;o(a,l);const r=await n.takeTurn(s,n.aiTarget);console.log("AI: ",r)}o(c,s),o(a,l),console.log("game over")};console.log("webpack compiled to main.js"),Promise.resolve("loaded").then((()=>{s()})),console.log("end of main.js")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPOUIsUUFBUUMsUUFBUSxDQUFDaEMsRUFBS0MsSUFpRC9CLFFBOUNBaUMsaUJBRUUsTUFBTTRCLEVBQVVDLElBRVZDLEVBQVVELElBRVZFLEVBQVNQLElBRVRRLEVBQVNSLElBR1RTLEVBQWF4QixTQUFTeUIsZUFBZSxVQUNyQ0MsRUFBYTFCLFNBQVN5QixlQUFlLFVBSzNDLElBSkEsRUFBc0JELEVBQVlGLEdBQ2xDLEVBQXNCSSxFQUFZSCxJQUcxQkQsRUFBTy9DLGFBQWEsQ0FFMUIsRUFBc0JpRCxFQUFZRixHQUdsQyxNQUFNSyxRQUFnQlIsRUFBUTdCLFNBQVNpQyxFQUFRTixHQU0vQyxHQUxBUCxRQUFRQyxJQUFJLFVBQVdnQixHQUtuQkosRUFBT2hELFlBQ1QsTUFHRixFQUFzQm1ELEVBQVlILEdBR2xDLE1BQU1LLFFBQWdCUCxFQUFRL0IsU0FBU2dDLEVBQVFELEVBQVExQixVQUN2RGUsUUFBUUMsSUFBSSxPQUFRaUIsR0FJdEIsRUFBc0JKLEVBQVlGLEdBQ2xDLEVBQXNCSSxFQUFZSCxHQUVsQ2IsUUFBUUMsSUFBSSxjQ2hGZEQsUUFBUUMsSUFBSSwrQkFFUXZCLFFBQVFDLFFBQVEsVUFDeEJ3QyxNQUFLLEtBQ2ZDLE9BR0ZwQixRQUFRQyxJQUFJLG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9zaGlwLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZWJvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvcGxheWVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZHJhd0JvYXJkLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvZ2FtZUxvb3AuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzaGlwRmFjdG9yeSA9IChsZW5ndGgpID0+IHtcbiAgY29uc3QgaGl0cyA9IG5ldyBBcnJheShsZW5ndGgpLmZpbGwoZmFsc2UpO1xuXG4gIGNvbnN0IGdldExlbmd0aCA9ICgpID0+IGxlbmd0aDtcbiAgY29uc3QgaXNTdW5rID0gKCkgPT4gaGl0cy5ldmVyeSgodmFsdWUpID0+IHZhbHVlKTtcbiAgY29uc3QgaGl0ID0gKGluZGV4KSA9PiB7XG4gICAgaGl0c1tpbmRleF0gPSB0cnVlO1xuICB9O1xuXG4gIHJldHVybiB7IGdldExlbmd0aCwgaXNTdW5rLCBoaXQgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHNoaXBGYWN0b3J5O1xuIiwiaW1wb3J0IHNoaXBGYWN0b3J5IGZyb20gJy4vc2hpcCc7XG5cbmNvbnN0IGdhbWVib2FyZEZhY3RvcnkgPSAoKSA9PiB7XG4gIGNvbnN0IGJvYXJkU2l6ZSA9IDEwO1xuICBjb25zdCBib2FyZCA9IFtdO1xuICBjb25zdCBzaGlwcyA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYm9hcmRTaXplOyBpICs9IDEpIHtcbiAgICBib2FyZFtpXSA9IG5ldyBBcnJheShib2FyZFNpemUpLmZpbGwoe30pO1xuICB9XG5cbiAgY29uc3QgZ2V0VGlsZSA9IChyb3csIGNvbCkgPT4gYm9hcmRbcm93XVtjb2xdO1xuXG4gIGNvbnN0IHBsYWNlU2hpcCA9ICh7XG4gICAgcm93LCBjb2wsIGxlbmd0aCwgaXNWZXJ0aWNhbCxcbiAgfSkgPT4ge1xuICAgIGNvbnN0IHNoaXAgPSBzaGlwRmFjdG9yeShsZW5ndGgpO1xuICAgIHNoaXBzLnB1c2goc2hpcCk7XG4gICAgaWYgKGlzVmVydGljYWwpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgYm9hcmRbcm93ICsgaV1bY29sXSA9IHtcbiAgICAgICAgICBzaGlwLFxuICAgICAgICAgIHBvczogaSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICBib2FyZFtyb3ddW2NvbCArIGldID0ge1xuICAgICAgICAgIHNoaXAsXG4gICAgICAgICAgcG9zOiBpLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjb25zdCByZWNlaXZlQXR0YWNrID0gKHJvdywgY29sKSA9PiB7XG4gICAgY29uc3QgY2VsbCA9IGJvYXJkW3Jvd11bY29sXTtcbiAgICBpZiAoY2VsbC5zaGlwKSB7XG4gICAgICBjZWxsLmhpdCA9IHRydWU7XG4gICAgICBjZWxsLnNoaXAuaGl0KGNlbGwucG9zKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBjcmVhdGUgbmV3IGNlbGwgYmVjYXVzZSBhbGwgZW1wdHkgY2VsbHMgcmVmZXJlbmNlIHNhbWUgb2JqZWN0XG4gICAgYm9hcmRbcm93XVtjb2xdID0geyBtaXNzOiB0cnVlIH07XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIGNvbnN0IGlzQWxsU3VuayA9ICgpID0+IHNoaXBzLmV2ZXJ5KChzaGlwKSA9PiBzaGlwLmlzU3VuaygpKTtcblxuICBjb25zdCBpc1ZhbGlkVGFyZ2V0ID0gKHJvdywgY29sKSA9PiB7XG4gICAgY29uc3QgY2VsbCA9IGJvYXJkW3Jvd11bY29sXTtcbiAgICByZXR1cm4gIShjZWxsLm1pc3MgfHwgY2VsbC5oaXQpO1xuICB9O1xuXG4gIGNvbnN0IGdldFdpZHRoID0gKCkgPT4gYm9hcmRbMF0ubGVuZ3RoO1xuICBjb25zdCBnZXRIZWlnaHQgPSAoKSA9PiBib2FyZC5sZW5ndGg7XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRUaWxlLCBwbGFjZVNoaXAsIHJlY2VpdmVBdHRhY2ssIGlzQWxsU3VuaywgaXNWYWxpZFRhcmdldCwgZ2V0V2lkdGgsIGdldEhlaWdodCxcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGdhbWVib2FyZEZhY3Rvcnk7XG4iLCJpbXBvcnQgZ2FtZWJvYXJkRmFjdG9yeSBmcm9tICcuL2dhbWVib2FyZCc7XG5cbmNvbnN0IHBsYXllckZhY3RvcnkgPSAoKSA9PiB7XG4gIGNvbnN0IGJvYXJkU2l6ZSA9IDEwO1xuICBjb25zdCBoaXRTdGFjayA9IFtdO1xuICBsZXQgc2VhcmNoQ291bnQgPSAwO1xuICBjb25zdCBzZWFyY2hPZmZzZXRzID0gW1swLCAtMV0sIFstMSwgMF0sIFswLCAxXSwgWzEsIDBdXTtcblxuICBjb25zdCB0YWtlVHVybiA9IGFzeW5jIGZ1bmN0aW9uIHRha2VUdXJuKG90aGVyQm9hcmQsIHRhcmdldEZ1bmMpIHtcbiAgICBsZXQgdmFsaWRUYXJnZXQgPSBmYWxzZTtcbiAgICBsZXQgcm93O1xuICAgIGxldCBjb2w7XG4gICAgd2hpbGUgKCF2YWxpZFRhcmdldCkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWF3YWl0LWluLWxvb3BcbiAgICAgIFtyb3csIGNvbF0gPSBhd2FpdCB0YXJnZXRGdW5jKCk7XG4gICAgICB2YWxpZFRhcmdldCA9IG90aGVyQm9hcmQuaXNWYWxpZFRhcmdldChyb3csIGNvbCk7XG4gICAgfVxuXG4gICAgY29uc3QgaGl0ID0gb3RoZXJCb2FyZC5yZWNlaXZlQXR0YWNrKHJvdywgY29sKTtcbiAgICBpZiAoaGl0KSB7XG4gICAgICBoaXRTdGFjay5wdXNoKFtyb3csIGNvbF0pO1xuICAgICAgc2VhcmNoQ291bnQgPSAwO1xuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZygndGFyZ2V0ZWQnLCByb3csIGNvbCk7XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsgcm93LCBjb2wsIGhpdCB9KTtcbiAgfTtcblxuICBjb25zdCByYW5kSW50ID0gKG51bSkgPT4gTWF0aC5mbG9vcihudW0gKiBNYXRoLnJhbmRvbSgpKTtcblxuICBjb25zdCByYW5kb21UYXJnZXQgPSAoKSA9PiB7XG4gICAgY29uc3Qgcm93ID0gcmFuZEludChib2FyZFNpemUpO1xuICAgIGNvbnN0IGNvbCA9IHJhbmRJbnQoYm9hcmRTaXplKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtyb3csIGNvbF0pO1xuICB9O1xuXG4gIGNvbnN0IGFpVGFyZ2V0ID0gKCkgPT4ge1xuICAgIGlmIChzZWFyY2hDb3VudCA9PT0gNCkge1xuICAgICAgaGl0U3RhY2sucG9wKCk7XG4gICAgICBzZWFyY2hDb3VudCA9IDA7XG4gICAgfVxuICAgIGlmIChoaXRTdGFjay5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IHJhbmRvbVByb21pc2UgPSByYW5kb21UYXJnZXQoKTtcbiAgICAgIHJldHVybiByYW5kb21Qcm9taXNlO1xuICAgIH1cbiAgICBsZXQgcm93O1xuICAgIGxldCBjb2w7XG4gICAgW3JvdywgY29sXSA9IGhpdFN0YWNrW2hpdFN0YWNrLmxlbmd0aCAtIDFdO1xuICAgIGNvbnN0IG9mZnNldCA9IHNlYXJjaE9mZnNldHNbc2VhcmNoQ291bnRdO1xuICAgIHJvdyArPSBvZmZzZXRbMF07XG4gICAgY29sICs9IG9mZnNldFsxXTtcbiAgICBzZWFyY2hDb3VudCArPSAxO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW3JvdywgY29sXSk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICB0YWtlVHVybiwgcmFuZG9tVGFyZ2V0LCBhaVRhcmdldCxcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHBsYXllckZhY3Rvcnk7XG4iLCIvLyBwcmVwYXJlIGFuIGh0bWwgZWxlbWVudCB0byByZXByZXNlbnQgYSAxMHgxMCBib2FyZFxuZnVuY3Rpb24gZ2V0U3ltYm9sKGNlbGwpIHtcbiAgLy8gbm8gc2hvdCB5ZXQsIG5vIHNoaXBcbiAgaWYgKCFjZWxsLmhpdCAmJiAhY2VsbC5taXNzICYmICFjZWxsLnNoaXApIHsgcmV0dXJuICdPJzsgfVxuICAvLyBtaXNzZWQgc2hvdFxuICBpZiAoY2VsbC5taXNzKSB7IHJldHVybiAnLic7IH1cbiAgLy8gaGl0IGFuZCBzdW5rXG4gIGlmIChjZWxsLmhpdCAmJiBjZWxsLnNoaXAuaXNTdW5rKCkpIHsgcmV0dXJuICdYJzsgfVxuICAvLyBvbmx5IGEgaGl0XG4gIGlmIChjZWxsLmhpdCkgeyByZXR1cm4gJ3gnOyB9XG4gIC8vIGEgc2hpcFxuICByZXR1cm4gJ1QnO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVCb2FyZEVsZW0oYm9hcmQpIHtcbiAgY29uc3QgcGFyZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcbiAgcGFyZW50LmFwcGVuZENoaWxkKHRhYmxlKTtcbiAgY29uc3Qgd2lkdGggPSBib2FyZC5nZXRXaWR0aCgpO1xuICBjb25zdCBoZWlnaHQgPSBib2FyZC5nZXRIZWlnaHQoKTtcblxuICBmb3IgKGxldCByb3cgPSAwOyByb3cgPCBoZWlnaHQ7IHJvdyArPSAxKSB7XG4gICAgY29uc3QgdFJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgdGFibGUuYXBwZW5kQ2hpbGQodFJvdyk7XG4gICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgd2lkdGg7IGNvbCArPSAxKSB7XG4gICAgICBjb25zdCB0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgIHRSb3cuYXBwZW5kQ2hpbGQodERpdik7XG4gICAgICB0RGl2LmlubmVyVGV4dCA9IGdldFN5bWJvbChib2FyZC5nZXRUaWxlKHJvdywgY29sKSk7XG4gICAgICAvLyBhZGQgZXZlbnQgbGlzdGVuZXIgdG8gY2VsbCBmb3IgaW5wdXRzXG4gICAgfVxuICB9XG4gIHJldHVybiBwYXJlbnQ7XG59XG5cbmZ1bmN0aW9uIGRyYXdCb2FyZChjb250YWluZXIsIGJvYXJkKSB7XG4gIGNvbnNvbGUubG9nKCdkcmF3aW5nIGJvcmFkJyk7XG4gIGNvbnN0IGJvYXJkRWxlbSA9IGNyZWF0ZUJvYXJkRWxlbShib2FyZCk7XG4gIGlmIChjb250YWluZXIuZmlyc3RDaGlsZCkgeyBjb250YWluZXIucmVwbGFjZUNoaWxkKGJvYXJkRWxlbSwgY29udGFpbmVyLmZpcnN0Q2hpbGQpOyB9IGVsc2UgeyBjb250YWluZXIuYXBwZW5kQ2hpbGQoYm9hcmRFbGVtKTsgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB7IGNyZWF0ZUJvYXJkRWxlbSwgZHJhd0JvYXJkIH07XG4iLCJpbXBvcnQgZ2FtZWJvYXJkRmFjdG9yeSBmcm9tICcuL2dhbWVib2FyZCc7XG5pbXBvcnQgcGxheWVyRmFjdG9yeSBmcm9tICcuL3BsYXllcic7XG5pbXBvcnQgYm9hcmREcmF3ZXIgZnJvbSAnLi9kcmF3Qm9hcmQnO1xuXG5mdW5jdGlvbiBzdGF0aWNCb2FyZFNldHVwKCkge1xuICBjb25zdCBib2FyZCA9IGdhbWVib2FyZEZhY3RvcnkoKTtcbiAgYm9hcmQucGxhY2VTaGlwKHtcbiAgICByb3c6IDAsIGNvbDogMiwgbGVuZ3RoOiAyLCBpc1ZlcnRpY2FsOiBmYWxzZSxcbiAgfSk7XG4gIGJvYXJkLnBsYWNlU2hpcCh7XG4gICAgcm93OiAzLCBjb2w6IDAsIGxlbmd0aDogMywgaXNWZXJ0aWNhbDogZmFsc2UsXG4gIH0pO1xuICBib2FyZC5wbGFjZVNoaXAoe1xuICAgIHJvdzogNCwgY29sOiAzLCBsZW5ndGg6IDMsIGlzVmVydGljYWw6IHRydWUsXG4gIH0pO1xuICBib2FyZC5wbGFjZVNoaXAoe1xuICAgIHJvdzogMiwgY29sOiA1LCBsZW5ndGg6IDQsIGlzVmVydGljYWw6IGZhbHNlLFxuICB9KTtcbiAgYm9hcmQucGxhY2VTaGlwKHtcbiAgICByb3c6IDYsIGNvbDogNSwgbGVuZ3RoOiA1LCBpc1ZlcnRpY2FsOiBmYWxzZSxcbiAgfSk7XG5cbiAgcmV0dXJuIGJvYXJkO1xufVxuXG5mdW5jdGlvbiBxdWlja0JvYXJkU2V0dXAoKSB7XG4gIGNvbnN0IGJvYXJkID0gZ2FtZWJvYXJkRmFjdG9yeSgpO1xuICBib2FyZC5wbGFjZVNoaXAoe1xuICAgIHJvdzogNCwgY29sOiA1LCBsZW5ndGg6IDIsIGlzVmVydGljYWw6IHRydWUsXG4gIH0pO1xuXG4gIHJldHVybiBib2FyZDtcbn1cblxuZnVuY3Rpb24gcHJvbXB0VGFyZ2V0aW5nKCkge1xuICBjb25zdCByb3cgPSBwcm9tcHQoJ1NlbGVjdCBhIHJvdycpO1xuICBjb25zdCBjb2wgPSBwcm9tcHQoJ1NlbGVjdCBhIGNvbCcpO1xuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtyb3csIGNvbF0pO1xufVxuXG5hc3luYyBmdW5jdGlvbiBydW5HYW1lKCkge1xuICAvLyBjcmVhdGUgcGxheWVyIDFcbiAgY29uc3QgcGxheWVyMSA9IHBsYXllckZhY3RvcnkoKTtcbiAgLy8gY3JlYXRlIHBsYXllciAyXG4gIGNvbnN0IHBsYXllcjIgPSBwbGF5ZXJGYWN0b3J5KCk7XG4gIC8vIGNyZWF0ZSBib2FyZCAxXG4gIGNvbnN0IGJvYXJkMSA9IHF1aWNrQm9hcmRTZXR1cCgpO1xuICAvLyBjcmVhdGUgYm9hcmQgMlxuICBjb25zdCBib2FyZDIgPSBxdWlja0JvYXJkU2V0dXAoKTtcblxuICAvLyBvbmUgYm9hcmQgY29udGFpbmVyXG4gIGNvbnN0IGNvbnRhaW5lcjEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9hcmQxJyk7XG4gIGNvbnN0IGNvbnRhaW5lcjIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9hcmQyJyk7XG4gIGJvYXJkRHJhd2VyLmRyYXdCb2FyZChjb250YWluZXIxLCBib2FyZDEpO1xuICBib2FyZERyYXdlci5kcmF3Qm9hcmQoY29udGFpbmVyMiwgYm9hcmQyKTtcblxuICAvLyBzdGFydCBsb29wXG4gIHdoaWxlICghYm9hcmQxLmlzQWxsU3VuaygpKSB7XG4gICAgLy8gZHJhdyBib2FyZFxuICAgIGJvYXJkRHJhd2VyLmRyYXdCb2FyZChjb250YWluZXIxLCBib2FyZDEpO1xuICAgIC8vIGFzayBodW1hbiBwbGF5ZXIgdG8gY2hvb3NlIHRhcmdldFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1hd2FpdC1pbi1sb29wXG4gICAgY29uc3QgYWN0aW9uMSA9IGF3YWl0IHBsYXllcjEudGFrZVR1cm4oYm9hcmQyLCBwcm9tcHRUYXJnZXRpbmcpO1xuICAgIGNvbnNvbGUubG9nKCdIdW1hbjogJywgYWN0aW9uMSk7XG4gICAgLy8gYWxsb3cgY2xpY2tpbmcgb24gYm9hcmRcbiAgICAvLyBvbmNlIHRhcmdldCBpcyBzZWxlY3RlZCwgZW5kIGNsaWNraW5nXG5cbiAgICAvLyBjaGVjayBpZiBBSSBsb3Nlc1xuICAgIGlmIChib2FyZDIuaXNBbGxTdW5rKCkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICAvLyBkb24ndCByZWRyYXcgYm9hcmRcbiAgICBib2FyZERyYXdlci5kcmF3Qm9hcmQoY29udGFpbmVyMiwgYm9hcmQyKTtcbiAgICAvLyBBSSBjaG9vc2UgdGFyZ2V0XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWF3YWl0LWluLWxvb3BcbiAgICBjb25zdCBhY3Rpb24yID0gYXdhaXQgcGxheWVyMi50YWtlVHVybihib2FyZDEsIHBsYXllcjIuYWlUYXJnZXQpO1xuICAgIGNvbnNvbGUubG9nKCdBSTogJywgYWN0aW9uMik7XG4gIC8vIGNoZWNrIGlmIGh1bWFuIGxvc2VzXG4gIC8vIGJhY2sgdG8gdG9wIG9mIGxvb3BcbiAgfVxuICBib2FyZERyYXdlci5kcmF3Qm9hcmQoY29udGFpbmVyMSwgYm9hcmQxKTtcbiAgYm9hcmREcmF3ZXIuZHJhd0JvYXJkKGNvbnRhaW5lcjIsIGJvYXJkMik7XG4gIC8vIGV4aXQgZnVuY3Rpb25cbiAgY29uc29sZS5sb2coJ2dhbWUgb3ZlcicpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7IHJ1bkdhbWUgfTtcbiIsImltcG9ydCBnYW1lTG9vcCBmcm9tICcuL2dhbWVMb29wJztcblxuLy8gdGVzdCB0aGF0IHdlYnBhY2sgd29ya3NcbmNvbnNvbGUubG9nKCd3ZWJwYWNrIGNvbXBpbGVkIHRvIG1haW4uanMnKTtcblxuY29uc3Qgd2FpdEZvclBhZ2UgPSBQcm9taXNlLnJlc29sdmUoJ2xvYWRlZCcpO1xud2FpdEZvclBhZ2UudGhlbigoKSA9PiB7XG4gIGdhbWVMb29wLnJ1bkdhbWUoKTtcbn0pO1xuXG5jb25zb2xlLmxvZygnZW5kIG9mIG1haW4uanMnKTtcbiJdLCJuYW1lcyI6WyJib2FyZCIsInNoaXBzIiwiaSIsIkFycmF5IiwiZmlsbCIsImdldFRpbGUiLCJyb3ciLCJjb2wiLCJwbGFjZVNoaXAiLCJsZW5ndGgiLCJpc1ZlcnRpY2FsIiwic2hpcCIsImhpdHMiLCJnZXRMZW5ndGgiLCJpc1N1bmsiLCJldmVyeSIsInZhbHVlIiwiaGl0IiwiaW5kZXgiLCJwdXNoIiwicG9zIiwicmVjZWl2ZUF0dGFjayIsImNlbGwiLCJtaXNzIiwiaXNBbGxTdW5rIiwiaXNWYWxpZFRhcmdldCIsImdldFdpZHRoIiwiZ2V0SGVpZ2h0IiwiaGl0U3RhY2siLCJzZWFyY2hDb3VudCIsInNlYXJjaE9mZnNldHMiLCJyYW5kSW50IiwibnVtIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicmFuZG9tVGFyZ2V0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0YWtlVHVybiIsImFzeW5jIiwib3RoZXJCb2FyZCIsInRhcmdldEZ1bmMiLCJ2YWxpZFRhcmdldCIsImFpVGFyZ2V0IiwicG9wIiwib2Zmc2V0IiwiY3JlYXRlQm9hcmRFbGVtIiwicGFyZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwidGFibGUiLCJhcHBlbmRDaGlsZCIsIndpZHRoIiwiaGVpZ2h0IiwidFJvdyIsInREaXYiLCJpbm5lclRleHQiLCJjb250YWluZXIiLCJjb25zb2xlIiwibG9nIiwiYm9hcmRFbGVtIiwiZmlyc3RDaGlsZCIsInJlcGxhY2VDaGlsZCIsInF1aWNrQm9hcmRTZXR1cCIsImdhbWVib2FyZCIsInByb21wdFRhcmdldGluZyIsInByb21wdCIsInBsYXllcjEiLCJwbGF5ZXIiLCJwbGF5ZXIyIiwiYm9hcmQxIiwiYm9hcmQyIiwiY29udGFpbmVyMSIsImdldEVsZW1lbnRCeUlkIiwiY29udGFpbmVyMiIsImFjdGlvbjEiLCJhY3Rpb24yIiwidGhlbiIsImdhbWVMb29wIl0sInNvdXJjZVJvb3QiOiIifQ==